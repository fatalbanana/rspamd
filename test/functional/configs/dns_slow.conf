# DNS configuration for slow TCP server test
# Overrides DNS settings to point to our custom slow DNS server

.include "{= env.TESTDIR =}/../../conf/rspamd.conf"

lua = "{= env.TESTDIR =}/lua/dns_slow.lua"

options {
  pidfile = "{= env.TMPDIR =}/rspamd.pid";
  
  dns {
    # Use our custom slow DNS server that triggers partial writes
    nameserver = ["127.0.0.1:15353"];
    timeout = 10s;  # Allow time for slow server
    retransmits = 1;
  }
}

